javascript: !function(){const e=document.createElement("div");document.body.appendChild(e),e.id="minesweeper-game__mf",e.style.cssText="position: fixed; width: 100%; height: 100%; display: flex; z-index: 999999999999; top: 0; left: 0;",e.innerHTML="<style>:root{--nbColumns:10;}#minesweeper-game__mf, #minesweeper-game__mf *{margin:0;padding:0;box-sizing:border-box;font-family:'Gill Sans','Gill Sans MT',Calibri,'Trebuchet MS',sans-serif;}#minesweeper-game__mf dialog{margin:auto;border:none;background-color:transparent;}#minesweeper-game__mf dialog::backdrop{background-color:rgba(0,0,0,0.8);}#minesweeper-game__mf dialog div{width:300px;height:250px;border-radius:8px;display:flex;background-color:#FFFFFFDD;padding:8px;margin-bottom:16px;}#minesweeper-game__mf dialog div span{flex:1 1 0;display:flex;justify-content:center;align-items:center;}#minesweeper-game__mf dialog button{border:none;background-color:#81a038;border-radius:8px;width:300px;color:#FFFFFF;padding:16px 24px;cursor:pointer;font-size:18px;display:flex;justify-content:center;align-items:center;}#minesweeper-game__mf dialog button img{height:24px;margin-right:12px;}#minesweeper-game__mf dialog button:focus{border:none;outline:none;}#minesweeper-game__mf .toolbar{background-color:#81a038;padding:12px 24px;display:flex;justify-content:space-between;align-items:center;color:#FFFFFF;}#minesweeper-game__mf .toolbar select{border-radius:4px;}#minesweeper-game__mf .toolbar .mine-counter{position: relative;}#minesweeper-game__mf .toolbar .mine-counter::before{content: 'âš‘';color: red;}#minesweeper-game__mf .toolbar .time-counter{position: relative;}#minesweeper-game__mf .toolbar .time-counter::before{content:'ðŸ•’';}#minesweeper-game__mf .grid{width:100%;display:grid;grid-template-columns:repeat(var(--nbColumns),1fr);-webkit-user-select:none;user-select:none;}#minesweeper-game__mf .grid div{aspect-ratio:1 / 1;transition:background-color 0.1s,filter 0.25s;text-align:center;cursor:pointer;display:flex;justify-content:center;align-items: center;font-size:calc(20em / var(--nbColumns));background-color:#AAD751;font-weight:800;}#minesweeper-game__mf .grid div.alternate{background-color:#A2D149;}#minesweeper-game__mf .grid div.open{cursor:default;background-color:#E5C29f;}#minesweeper-game__mf .grid div.open.alternate{background-color: #D7B899;}#minesweeper-game__mf .grid > div:not(.open):hover{filter:brightness(1.2);}</style>";const t=document.createElement("div");e.appendChild(t),t.style.cssText="width: 100%; max-width: 680px; margin: auto;",document.body.addEventListener("click",(()=>{e.remove()})),t.addEventListener("click",(e=>{e.stopPropagation()}));const n={EASY:{name:"easy",height:8,width:10,mines:10},MID:{name:"mid",height:14,width:18,mines:40},HARD:{name:"hard",height:20,width:24,mines:99}},o="EASY",a={1:"#1976d2",2:"#388e3c",3:"#d32f2f",4:"#7b1fa2",5:"#ff8f00",6:"#0097a7",flag:"red",mine:"black"},r=document.createElement("div");r.classList.add("toolbar");const i=document.createElement("select");i.onchange=()=>{d.changeDif(i.value)};for(const[e,t]of Object.entries(n)){const n=document.createElement("option");n.value=e,n.textContent=t.name,n.selected=e==o,i.appendChild(n)}r.appendChild(i);const s=document.createElement("span");s.classList.add("mine-counter"),r.appendChild(s);const l=document.createElement("span");l.textContent=0,l.classList.add("time-counter"),r.appendChild(l),t.appendChild(r);const d=function(){let e,{width:r,height:d,mines:m}=n[o],c=0,p=[],g=!0;return{initGame(){e=setInterval((()=>{c++,l.textContent=c}),1e3);const n=document.createElement("div");n.classList.add("grid"),n.oncontextmenu=()=>!1,document.documentElement.style.setProperty("--nbColumns",r),s.textContent=m;for(let e=0;e<d;e++){const t=[];for(let o=0;o<r;o++){let a=document.createElement("div");a.onmousedown=this.clickCallback(e,o),(e+o)%2==0&&a.classList.add("alternate");const r={status:0,marked:!1,unraveled:!1,element:a};n.appendChild(a),t.push(r)}p.push(t)}t.appendChild(n),this.placeMines()},placeMines(){let e=0;for(;e<m;){const t=Math.floor(Math.random()*d),n=Math.floor(Math.random()*r),o=p[t][n];1!==o.status&&(o.status=1,e++)}},clickCallback(t,n){return o=>{if(o.preventDefault(),!g)return;const r=p[t][n];if(!r.unraveled){if(0===o.button){if(r.marked)return;1===r.status?this.lostGame():(r.unraveled=!0,this.unravel(t,n))}else 2===o.button&&(r.marked=!r.marked,r.marked?(r.element.textContent="âš‘",r.element.style.color=a.flag,m--):(r.element.textContent="",r.element.style.color="",m++),s.textContent=m);this.checkWin(),!1===g&&clearInterval(e)}}},unravel(e,t){const n=p[e][t];n.unraveled=!0;let o=0;for(let n=e-1;n<=e+1;n++)for(let a=t-1;a<=t+1;a++)n===e&&a===t||n<0||n>=d||a<0||a>=r||1===p[n][a].status&&o++;if(n.element.classList.add("open"),o>0)n.element.textContent=o,n.element.style.color=a[o];else for(let n=e-1;n<=e+1;n++)for(let o=t-1;o<=t+1;o++)n===e&&o===t||n<0||n>=d||o<0||o>=r||1===p[n][o].status||p[n][o].marked||p[n][o].unraveled||this.unravel(n,o)},lostGame(){for(let e=0;e<p.length;e++)for(let t=0;t<p[e].length;t++){const n=p[e][t];1!==n.status||n.marked?1!==n.status&&n.marked&&(n.element.textContent="x"):n.element.textContent="*"}this.endScreen(!1)},checkWin(){let e=0;for(let t=0;t<p.length;t++)for(let n=0;n<p[t].length;n++){const o=p[t][n];1===o.status&&o.marked||o.unraveled||e++}m===e&&this.endScreen(!0)},changeDif(e){({width:r,height:d,mines:m}=n[e]),this.reset()},endScreen(n=!1){g=!1,clearInterval(e);const o=localStorage.getItem("pb");n&&(!o||isNaN(parseInt(o))||c<o)&&localStorage.setItem("pb",c),n||(c="");const a=document.createElement("dialog");a.innerHTML=%60<div><span>Run: ${c}</span><span>Pb: ${o??"-"}</span></div>%60;const r=document.createElement("button");r.innerHTML='<img src="https://www.gstatic.com/images/icons/material/system/2x/refresh_white_24dp.png">Play Again',r.onclick=()=>{a.remove(),this.changeDif(i.value)},a.appendChild(r),t.appendChild(a),setTimeout((()=>{a.showModal()}),2500)},reset(){t.querySelector(".grid").remove(),p=[],g=!0,c=0,clearInterval(e),l.textContent=0,this.initGame()}}}();d.initGame()}();
