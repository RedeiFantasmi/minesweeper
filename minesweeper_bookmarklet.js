javascript: !function(){const e=document.createElement("div");document.body.appendChild(e),e.id="minesweeper-game__mf",e.style.cssText="position: fixed; margin: auto; max-width: 680px; width: 100%; z-index: 999999999999; top: 50%; left: 50%; transform: translate(-50%, -50%)",e.innerHTML="<style>:root{--nbColumns:10;}#minesweeper-game__mf, #minesweeper-game__mf *{margin:0;padding:0;box-sizing:border-box;font-family:'Gill Sans','Gill Sans MT',Calibri,'Trebuchet MS',sans-serif;}#minesweeper-game__mf dialog{margin:auto;border:none;background-color:transparent;}#minesweeper-game__mf dialog::backdrop{background-color:rgba(0,0,0,0.8);}#minesweeper-game__mf dialog div{width:300px;height:250px;border-radius:8px;display:flex;background-color:#FFFFFFDD;padding:8px;margin-bottom:16px;}#minesweeper-game__mf dialog div span{flex:1 1 0;display:flex;justify-content:center;align-items:center;}#minesweeper-game__mf dialog button{border:none;background-color:#81a038;border-radius:8px;width:300px;color:#FFFFFF;padding:16px 24px;cursor:pointer;font-size:18px;display:flex;justify-content:center;align-items:center;}#minesweeper-game__mf dialog button img{height:24px;margin-right:12px;}#minesweeper-game__mf dialog button:focus{border:none;outline:none;}#minesweeper-game__mf .toolbar{background-color:#81a038;padding:12px 24px;display:flex;justify-content:space-between;align-items:center;color:#FFFFFF;}#minesweeper-game__mf .toolbar select{border-radius:4px;}#minesweeper-game__mf .toolbar .mine-counter{position: relative;}#minesweeper-game__mf .toolbar .mine-counter::before{content: 'âš‘';color: red;}#minesweeper-game__mf .toolbar .time-counter{position: relative;}#minesweeper-game__mf .toolbar .time-counter::before{content:'ðŸ•’';}#minesweeper-game__mf .grid{width:100%;display:grid;grid-template-columns:repeat(var(--nbColumns),1fr);-webkit-user-select:none;user-select:none;}#minesweeper-game__mf .grid div{aspect-ratio:1 / 1;transition:background-color 0.1s,filter 0.25s;text-align:center;cursor:pointer;display:flex;justify-content:center;align-items: center;font-size:calc(20em / var(--nbColumns));background-color:#AAD751;font-weight:800;}#minesweeper-game__mf .grid div.alternate{background-color:#A2D149;}#minesweeper-game__mf .grid div.open{cursor:default;background-color:#E5C29f;}#minesweeper-game__mf .grid div.open.alternate{background-color: #D7B899;}#minesweeper-game__mf .grid > div:not(.open):hover{filter:brightness(1.2);}</style>",document.body.addEventListener("click",(()=>{e.remove()})),e.addEventListener("click",(e=>{e.stopPropagation()}));const n=0,t=1,a={EASY:{name:"easy",height:8,width:10,mines:10},MID:{name:"mid",height:14,width:18,mines:40},HARD:{name:"hard",height:20,width:24,mines:99}},o="EASY",r={1:"#1976d2",2:"#388e3c",3:"#d32f2f",4:"#7b1fa2",5:"#ff8f00",6:"#0097a7",flag:"red",mine:"black"},i=document.createElement("div");i.classList.add("toolbar");const s=document.createElement("select");s.onchange=()=>{d.changeDif(s.value)};for(const[e,n]of Object.entries(a)){const t=document.createElement("option");t.value=e,t.textContent=n.name,t.selected=e==o,s.appendChild(t)}i.appendChild(s);const l=document.createElement("span");l.classList.add("mine-counter"),i.appendChild(l);const m=document.createElement("span");m.textContent=0,m.classList.add("time-counter"),i.appendChild(m),e.appendChild(i);const d=function(){let i,{width:d,height:c,mines:p}=a[o],g=0,u=[],f=!0;return{initGame(){i=setInterval((()=>{g++,m.textContent=g}),1e3);const t=document.createElement("div");t.classList.add("grid"),t.oncontextmenu=()=>!1,document.documentElement.style.setProperty("--nbColumns",d),l.textContent=p;for(let e=0;e<c;e++){const a=[];for(let o=0;o<d;o++){let r=document.createElement("div");r.onmousedown=this.clickCallback(e,o),(e+o)%2==0&&r.classList.add("alternate");const i={status:n,marked:!1,unraveled:!1,element:r};t.appendChild(r),a.push(i)}u.push(a)}e.appendChild(t),this.placeMines()},placeMines(){let e=0;for(;e<p;){const n=Math.floor(Math.random()*c),a=Math.floor(Math.random()*d),o=u[n][a];o.status!==t&&(o.status=t,e++)}},clickCallback(e,n){return a=>{if(a.preventDefault(),!f)return;const o=u[e][n];if(!o.unraveled){if(0===a.button){if(o.marked)return;o.status===t?this.lostGame():(o.unraveled=!0,this.unravel(e,n))}else 2===a.button&&(o.marked=!o.marked,o.marked?(o.element.textContent="âš‘",o.element.style.color=r.flag,p--):(o.element.textContent="",p++),l.textContent=p);this.checkWin(),!1===f&&clearInterval(i)}}},unravel(e,n){const a=u[e][n];a.unraveled=!0;let o=0;for(let a=e-1;a<=e+1;a++)for(let r=n-1;r<=n+1;r++)a===e&&r===n||a<0||a>=c||r<0||r>=d||u[a][r].status===t&&o++;if(a.element.classList.add("open"),o>0)a.element.textContent=o,a.element.style.color=r[o];else for(let a=e-1;a<=e+1;a++)for(let o=n-1;o<=n+1;o++)a===e&&o===n||a<0||a>=c||o<0||o>=d||u[a][o].status===t||u[a][o].marked||u[a][o].unraveled||this.unravel(a,o)},lostGame(){for(let e=0;e<u.length;e++)for(let n=0;n<u[e].length;n++){const a=u[e][n];a.status!==t||a.marked?a.status!==t&&a.marked&&(a.element.textContent="x"):a.element.textContent="*"}this.endScreen(!1)},checkWin(){let e=0;for(let n=0;n<u.length;n++)for(let a=0;a<u[n].length;a++){const o=u[n][a];o.status===t&&o.marked||o.unraveled||e++}p===e&&this.endScreen(!0)},changeDif(e){({width:d,height:c,mines:p}=a[e]),this.reset()},endScreen(n=!1){f=!1,clearInterval(i);const t=localStorage.getItem("pb");n&&(!t||isNaN(parseInt(t))||g<t)&&localStorage.setItem("pb",g),n||(g="");const a=document.createElement("dialog");a.innerHTML=%60<div><span>Run: ${g}</span><span>Pb: ${t??"-"}</span></div>%60;const o=document.createElement("button");o.innerHTML='<img src="https://www.gstatic.com/images/icons/material/system/2x/refresh_white_24dp.png">Play Again',o.onclick=()=>{a.remove(),this.changeDif(s.value)},a.appendChild(o),e.appendChild(a),setTimeout((()=>{a.showModal()}),2500)},reset(){e.querySelector(".grid").remove(),u=[],f=!0,g=0,clearInterval(i),m.textContent=0,this.initGame()}}}();d.initGame()}();